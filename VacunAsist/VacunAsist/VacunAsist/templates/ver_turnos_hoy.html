{% extends "base_login.html" %}
 {% load static %}
 {% block content %}
<body class="user">
<input type="text" id="myInput" placeholder="Ingrese un DNI">
<button type="button" onclick="myFunction3()">Buscar turno</button>
<div class="container-sm" style="float: left; padding-left: 5%; padding-top: 4%; width: 60%;">
    <div class="col-12" style="height: 100%; background-color: #fff;">
        <table class="table table-hover" id="myTable">
            <p style="background-color: white;"><strong>Turnos del d√≠a:</strong></p>
            <thead class="table-secondary">
            <tr>
                <th scope="col">DNI</th>
                <th scope="col">Nombre y apellido</th>
                <th scope="col">Fecha</th>
                <th scope="col">Vacuna</th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody style="overflow: scroll;">
            {% for turno in turnos %}
            <tr>
                <td class="row_a">{{turno.usuario.dni}}</td>
                <td class="row_b">{{turno.usuario.nombre_apellido}}</td>
                <td class="row_c">{{turno.fecha.day}}/{{turno.fecha.month}}/{{turno.fecha.year}}</td>
                <td class="row_d">{{turno.vacuna.tipo}}</td>
                <td><button class="edit_row" href="" data-toggle="modal" data-target="#modalLoginForm" onclick=myFunction4()>Cargar</button></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Cargar vacuna</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-4">
          <i class="fas fa-envelope prefix grey-text"></i>
          <label data-error="wrong" data-success="right" for="defaultForm-email">Fecha</label>
          <input type="text" name="e_dni" id="e_dni" /><br/>
        </div>

        <div class="md-form mb-4">
          <i class="fas fa-lock prefix grey-text"></i>
          <label data-error="wrong" data-success="right" for="defaultForm-pass">DNI</label>
          <input id="defaultForm-pass" class="form-control validate" id="CAMPO_DNI">
        </div>
    
          <div class="md-form mb-4">
            <i class="fas fa-envelope prefix grey-text"></i>
            <label data-error="wrong" data-success="right" for="defaultForm-email">Tipo</label>
            <input  id="defaultForm-email" class="form-control validate">
            
          </div>
          <div class="md-form mb-4">
            <i class="fas fa-envelope prefix grey-text"></i>
            <label data-error="wrong" data-success="right" for="defaultForm-email">Marca</label>
            <input  id="defaultForm-email" class="form-control validate">
            
          </div>
  
          <div class="md-form mb-4">
            <i class="fas fa-lock prefix grey-text"></i>
            <label data-error="wrong" data-success="right" for="defaultForm-pass">Lote</label>
            <input type="" id="defaultForm-pass" class="form-control validate">
            
          </div>

      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button class="btn btn-default">Cargar vacuna</button>
      </div>
    </div>
  </div>
</div>



{% if mensaje != "" %}
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle"></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {{ mensaje }}
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
<script type="text/javascript" language="JavaScript">
    let myModal = new bootstrap.Modal(document.getElementById('exampleModalCenter'), {});
    myModal.show();
</script>
{% endif %}
<script>
  
  function myFunction4() {
    var edit_row = document.querySelectorAll('#t_id .edit_row');
    for(var i=0; i<edit_row.length; i++) {
      edit_row[i].addEventListener('click', function(e){
        // get parent row, add data from its cells in form fields
        var tr_parent = this.parentNode;
        document.getElementById('e_dni').value = tr_parent.querySelector('.row_a').innerHTML;
        document.getElementById('e_title').value = tr_parent.querySelector('.row_t').innerHTML;
        document.getElementById('e_desc').value = tr_parent.querySelector('.row_d').innerHTML;

        // display the form, and focus on a form field
        document.getElementById('edit_form').style.display = 'block';
        document.getElementById('e_site').focus();
      }, false);

    }
  }
</script>
<script>

  function myFunction3() {
    // Declare variables
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
  
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        txtValue = td.textContent || td.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  }
</script>

</body>

{% endblock %}