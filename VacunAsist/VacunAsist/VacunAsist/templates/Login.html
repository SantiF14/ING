<!doctype html>
<html lang="es">
    <!--
Ejemplo de formulario de login con Bootstrap
Basado en:
  Plantilla inicial de Bootstrap 4
  @author parzibyte
  Visita: parzibyte.me/blog
-->
{% extends "HeaderBaseNoLog.html" %}
{% load static %}

{% block title %} VacunAssist
{% endblock %}


{% block content %}

    <body class="no_user "> 
        <div class="layer">
        <div class="" style="height: 15%; "></div>
        <main role="main" class="container">
            <div class="row" style="align-content: center; background-color: transparent;">
                <div id="login" class="col-lg-5 offset-lg-3 col-md-7 offset-md-3
                    col-10" style="background-color: rgba(255, 255, 255, 0.80);">    
                    <div class="card-header card card-outline-secondary" style="background: #A2CB83;">
                        <h3 class="mb-0" style="text-align: center;">Bienvenido de nuevo</h3>
                </div>

                    <form method="post"  action="">{% csrf_token %}
                            {% for field in login_form %}
                            {% if field.name != "" %}
                                <div class="field-wrapper"><br>
                                    <div class="label-wrapper" style="width: 47%;"> 
                                        {{ field.label }} 

                                        {% if field.field.required %}<span class="required">*</span>{% endif %}
                                        {% if field.help_text != "" %}
                                            <i class="fa-solid fa-circle-info" title="{{ field.help_text }}"></i>
                                        {% endif %}
                                    </div>
                                    <div class="value-wrapper">
                                        {{ field }}                                        
                                        {{ field.errors }}
                                        
                                    </div>
                                    {% if field.field.label_suffix == "contraseña" %}
                                        <div class="pass-icon">
                                            <i class="bi bi-eye-slash-fill" style="cursor: pointer;" id="togglePassword"></i>
                                        </div>
                                    {% endif %}

                                </div>
                            {% endif %}
                        {% endfor %} 
                        <!--Basicamente esto dice que si hay errores, que los muestre-->
        
                        {% if login_form.non_field_errors %}
                        <div style="color: rgb(105, 0, 0); text-align:left; list-style-type:none;">
                            <p>{{ login_form.non_field_errors }}</p>
                        </div>
                        {% endif %}
                        
                        <a href="#" style="float:left; margin-inline-start: 3%;"><span>¿Olvidaste tu contraseña? (Proximamente...)</span></a> 
                        <br><br>
                        <button type="submit"  style="background-color: #A2CB83;color:white; font-weight:600; min-width:90%; border-color: #3b6e22;" class="btn btn-primary mb-2">
                            Entrar
                        </button>
                        
                    </form>
                </div>
            </div>
        </main>
    </div>
    <script>
        const togglePassword = document.querySelector("#togglePassword");
        const password = document.querySelector("#id_password");

        togglePassword.addEventListener("click", function () {
            // toggle the type attribute
            const type = password.getAttribute("type") === "password" ? "text" : "password";
            password.setAttribute("type", type);
            
            // toggle the icon
            this.classList.toggle("bi-eye")
        });

    </script>
    </body>
    {% endblock %}